<html>
  <head>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Droid+Sans:700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="../../common.css">
    <link rel="stylesheet" href="../../common/lib/atom-one-light.css">
    <link rel="stylesheet" href="../spring.css">
  </head>
  <body>
    <input type="checkbox" id="showPreview"/>
    <div class="first-side">
      <div class="cutter">
<div class="cut cut-top-left">&nbsp;</div>
<div class="cut cut-bottom-left">&nbsp;</div>
<div class="cut cut-top-right">&nbsp;</div>
<div class="cut cut-bottom-right">&nbsp;</div>
</div>
<header>
    <div class="home-button no-print">
        <a href="../" title="back to home cheat Sheet"><i class="material-icons">home</i></a>
        <label for="showPreview"><i class="material-icons">visibility</i></label>
    </div>
    <div class="header-center">
        <div class="description-content">
            <div class="title">Spring Web cheat sheet</div>
            <div class="sub-title">MVC, API</div>
        </div>

        <div class="logo-container">
          <img src="../../assets/images/spring-web.png">
        </div>
    </div>
    <div class="logo-category no-print">
        <i class="material-icons" onclick="printLarge()">print</i>
    </div>
</header>



      <main>
        <div class="column1">
          <h1 id="controllers">Controllers</h1>
<p>At class level</p>
<pre><code class="language-Java">@Controller
@RequestMapping(&quot;/appointments&quot;)
public class AppointmentsController {
</code></pre>
<p>At method level for HTTP GET</p>
<pre><code class="language-Java">@GetMapping(path = &quot;/{day}&quot;)
public Map&lt;String, Appointment&gt; getForDay(@PathVariable @DateTimeFormat(iso=ISO.DATE) Date day, Model model) {
</code></pre>
<p>Getting request parameter</p>
<pre><code class="language-Java">@RequestMapping(method = RequestMethod.GET)
public String setupForm(@RequestParam(&quot;petId&quot;, required=false) int petId, ModelMap model) {
</code></pre>
<p>You can use consumes and/or produces to control data type</p>
<pre><code class="language-Java">@RequestMapping(path = &quot;/pets&quot;, method = RequestMethod.POST, consumes=&quot;application/json&quot;, produces = MediaType.APPLICATION_JSON_UTF8_VALUE)
@ResponseBoddy
public Pet addPet(@RequestBody Pet pet, Model model) {
</code></pre>
<p>NB: You can avoid using ResponseBody if you use @RestController instead of @Controller</p>
<p>Handling cookies</p>
<pre><code class="language-Java">@RequestMapping(&quot;/displayInfo&quot;)
public void displayHeaderInfo(@CookieValue(&quot;JSESSIONID&quot;) String cookie)
</code></pre>
<p>Handling HTTP headers</p>
<pre><code class="language-Java">@RequestMapping(&quot;/displayHeaderInfo&quot;)
public void displayHeaderInfo(@RequestHeader(&quot;Accept-Encoding&quot;) String encoding, @RequestHeader(&quot;Keep-Alive&quot;) long keepAlive) {
</code></pre>
<h1 id="using-modelattribute-and-sessionattributes">Using ModelAttribute and SessionAttributes</h1>
<p>Full example:</p>
<pre><code class="language-Java">@Controller @RequestMapping(&quot;/trades&quot;)
@SessionAttributes(&quot;visitor&quot;)
public class TradeController {
    @RequestMapping(&quot;/**&quot;)
    public String handleRequestById (@ModelAttribute(&quot;visitor&quot;) Visitor visitor,Model model, HttpServletRequest request) {
        model.addAttribute(&quot;msg&quot;, &quot;trades request, serving page &quot; + request.getRequestURI());
        visitor.addPageVisited(request.getRequestURI());
        return &quot;traders-page&quot;;
    }
    @ModelAttribute(&quot;visitor&quot;)
    public Visitor getVisitor (HttpServletRequest request) {
        return new Visitor(request.getRemoteAddr());
    }
}
</code></pre>

        </div>
        <div class="column2">
          <h1 id="handling-exceptions">Handling exceptions</h1>
<pre><code class="language-Java">@ControllerAdvice
public class ErrorController {
  ...
  @ExceptionHandler(AccessDeniedException.class)
  @ResponseBody
  @ResponseStatus(HttpStatus.FORBIDDEN)
  public ErrorResponse accessDenied(AccessDeniedException e) {
  }
}
</code></pre>
<h1 id="asynchronous-request-processing">Asynchronous request processing</h1>
<p>It is possible to use the Servlet 3.0 asynchronous request processing feature in Spring:</p>
<pre><code class="language-Java">@RequestMapping(method=RequestMethod.POST)
public Callable&lt;String&gt; processUpload(final MultipartFile file) {
  return new Callable&lt;String&gt;() {
      public String call() throws Exception {
        // ...
        return &quot;someView&quot;;
        }
  }
}
</code></pre>
<p>Or using DefferedResult</p>
<pre><code class="language-Java">@RequestMapping(&quot;/quotes&quot;)
@ResponseBody
public DeferredResult&lt;String&gt; quotes() {
  DeferredResult&lt;String&gt; deferredResult = new DeferredResult&lt;String&gt;();
  // Save the deferredResult somewhere..
  return deferredResult;
}
// In some other thread...
deferredResult.setResult(data);
</code></pre>

        </div>
      </main>

      <footer class="print-only">
  <a href="https://groupe-sii.github.io/cheat-sheets">groupe-sii.github.io/cheat-sheets</a>
  <a href="http://www.groupe-sii.com">www.groupe-sii.com</a>
  <a href="https://blog.groupe-sii.com">blog.groupe-sii.com</a>
  <img src="../../assets/images/logoSII-white.svg">
</footer>



    </div>

    <script src="../../common/lib/highlight.pack.js"></script>
    <script src="../../common/script.js"></script>
  </body>
</html>
